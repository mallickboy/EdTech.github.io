<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>File Links Query Form</title>
</head>

<body>
  <h2>File Links Query Form</h2>
  <form id="fileLinksForm">
    <label for="year">Year:</label>
    <input type="text" name="year" required><br>

    <label for="subject">Subject:</label>
    <select name="subject" required>
      <option value="chemistry">Chemistry</option>
      <option value="physics">Physics</option>
      <option value="maths">Maths</option>
    </select><br>

    <label for="contentType">Content Type (PDF/Videos):</label>
    <select name="contentType" required>
      <option value="PDF">PDF</option>
      <option value="Videos">Videos</option>
    </select><br>

    <label for="courseName">Course Name:</label>
    <input type="text" name="courseName" required><br>

    <button type="button" onclick="getFiles()">Get File Links</button>
  </form>

  <div id="result"></div>

  <script>
    function getFiles() {
      const form = document.getElementById('fileLinksForm');
      const formData = new FormData(form);

      // Create a query string from form data
      const queryString = new URLSearchParams(formData).toString();

      // Make a GET request to the /getFiles endpoint with the query string
      fetch(`http://localhost:8080/getFiles?${queryString}`)
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            displayFileLinks(data.fileLinks);
          } else {
            displayErrorMessage(data.message);
          }
        })
        .catch(error => {
          displayErrorMessage('Error fetching file links');
          console.error('Error:', error);
        });
    }

    function displayFileLinks(fileLinks) {
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = `<h3>File Links:</h3>${fileLinks.map(link => `<p>${link}</p>`).join('')}`;
    }

    function displayErrorMessage(message) {
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = `<p style="color: red;">${message}</p>`;
    }
  </script>
</body>

</html>